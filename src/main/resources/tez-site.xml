<configuration>

<!--   <property> -->
<!--     <name>tez.lib.uris</name> -->
<!--     value>${fs.default.name}/apps/tez/20130731-1000/tez-0.2.0-SNAPSHOT/,${fs.default.name}/apps/tez/20130731-1000/tez-0.2.0-SNAPSHOT/lib</value -->
<!--     value>${fs.default.name}/apps/tez/20131210/,${fs.default.name}/apps/tez/20131210/lib</value -->
<!--     <value>${fs.default.name}/apps/tezsid/tez-0.5.0-SNAPSHOT.tar.gz</value> -->
<!--   </property> -->

  <property>
    <name>tez.am.log.level</name>
    <value>INFO</value>
  </property>

  <property>
    <name>tez.staging-dir</name>
    <value>/tmp/${user.name}/staging</value>
  </property>

  <property>
    <name>tez.shuffle-vertex-manager.min-src-fraction</name>
    <value>0.25</value>
  </property>

  <property>
    <name>tez.shuffle-vertex-manager.max-src-fraction</name>
    <value>0.55</value>
  </property>

  <property>
    <name>tez.am.resource.memory.mb</name>
    <value>8192</value>
  </property>
  <!-- tez picks the java opts from yarn.app.mapreduce.am.command-opts for MR tasks -->
  <property>
    <name>tez.am.java.opts</name>
    <value>-server -Xmx8192m -XX:+UseCompressedStrings -Djava.net.preferIPv4Stack=true -XX:+PrintGCDetails -verbose:gc -XX:+PrintGCTimeStamps -XX:+UseNUMA -XX:+UseParallelGC</value>
  </property>

  <property>
    <name>tez.task.resource.memory.mb</name>
    <value>8192</value>
  </property>

  <property>
    <name>tez.runtime.io.sort.mb</name>
    <value>1800</value>
  </property>

  <property>
    <name>tez.runtime.unordered.output.buffer.size-mb</name>
    <value>1800</value>
  </property>

  <property>
    <name>tez.runtime.shuffle.fetch.buffer.percent</name>
    <value>0.9</value>
  </property>

  <property>
    <name>tez.runtime.task.input.post-merge.buffer.percent</name>
    <value>0.7</value>
  </property>

  <property>
    <name>tez.runtime.sort.threads</name>
    <value>4</value>
  </property>

  <property>
    <name>tez.am.am-rm.heartbeat.interval-ms.max</name>
    <value>250</value>
  </property>

  <property>
    <name>tez.grouping.by-count</name>
    <value>true</value>
  </property>
  <property>
    <name>tez.grouping.split-count</name>
    <value>5000</value>
  </property>
  <property>
    <name>tez.grouping.by-length</name>
    <value>false</value>
  </property>
  
  <!-- 
  tez.runtime.sort.spill.percent = 1
  
  so with this set to lower tez.grouping.split-count th above means that only spill when sort buffer get's to 99% full
   -->

  <!--property>
    <name>tez.grouping.split-waves</name>
    <value>10</value>
  </property-->

  <property>
    <name>tez.am.container.reuse.enabled</name>
    <value>true</value>
  </property>
  <property>
    <name>tez.am.container.reuse.rack-fallback.enabled</name>
    <value>true</value>
  </property>
  <property>
    <name>tez.am.container.reuse.non-local-fallback.enabled</name>
    <value>true</value>
  </property>
  <property>
    <name>tez.am.container.session.delay-allocation-millis</name>
    <value>-1</value>
  </property>
  <property>
    <name>tez.am.container.reuse.locality.delay-allocation-millis</name>
    <value>250</value>
  </property>
  <!--property>
    <name>tez.am.container.reuse.delay-allocation-millis</name>
    <value>60000</value>
  </property-->
  <property>
    <name>tez.task.get-task.sleep.interval-ms.max</name>
    <value>10</value>
  </property>

  <property>
    <name>tez.am.grouping.min-size</name>
    <value>16777216</value>
  </property>

  <!-- Client Submission timeout value when submitting DAGs to a session -->
  <property>
    <name>tez.session.client.timeout.secs</name>
    <value>-1</value>
  </property>
  <!-- prewarm stuff -->
  <property>
    <name>tez.session.pre-warm.enabled</name>
    <value>false</value>
  </property>

  <property>
    <name>tez.session.pre-warm.num.containers</name>
    <value>20</value>
  </property>

  <property>
    <name>tez.generate.dag.viz</name>
    <value>true</value>
  </property>

  <property>
    <name>tez.yarn.ats.enabled</name>
    <value>true</value>
  </property>

  <property>
    <name>tez.task.generate.counters.per.io</name>
    <value>true</value>
  </property>

  <property>
    <name>tez.runtime.job.counters.max</name>
    <value>10000</value>
  </property>

  <property>
    <name>tez.runtime.job.counters.groups.max</name>
    <value>10000</value>
  </property>

  <property>
    <name>tez.task.scale.memory.enabled</name>
    <value>true</value>
  </property>

   <property>
     <name>tez.task.scale.memory.allocator.class</name>
     <!--value>org.apache.tez.runtime.common.resources.ScalingAllocator</value-->
     <value>org.apache.tez.runtime.library.resources.WeightedScalingMemoryDistributor</value>
   </property>

  <property>
    <name>tez.task.scale.memory.reserve-fraction</name>
    <value>0.2</value>
  </property>

  <property>
    <name>tez.task.scale.memory.additional.reservation.fraction.per-io</name>
    <value>0.025</value>
  </property>

  <property>
    <name>tez.task.initial.memory.scale.ratios</name>
    <value>PARTITIONED_UNSORTED_OUTPUT:0,UNSORTED_INPUT:1,SORTED_OUTPUT:10,SORTED_MERGED_INPUT:20,PROCESSOR:1,OTHER:1</value>
  </property>

  <property>
    <name>tez.runtime.compress</name>
    <value>false</value>
  </property>

  <property>
    <name>tez.runtime.compress.codec</name>
    <value>org.apache.hadoop.io.compress.SnappyCodec</value>
  </property>


  <property>
    <name>tez.generate.debug.artifacts</name>
    <value>true</value>
  </property>

</configuration>